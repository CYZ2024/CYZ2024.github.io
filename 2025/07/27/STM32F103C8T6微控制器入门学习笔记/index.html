<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="STM32F103C8T6 微控制器入门学习笔记基于 STM32 标准外设库笔记概述本笔记以 STM32F103C8T6 为目标芯片，使用 Keil5 开发环境和 STM32 标准外设库（Standard Peripheral Library），，掌握基本的 MCU 编程和调试技能。 开发环境 目标芯片: STM32F103C8T6 (ARM Cortex-M3 内核) 开发工具: Keil MD">
<meta property="og:type" content="article">
<meta property="og:title" content="STM32F103C8T6微控制器入门学习笔记">
<meta property="og:url" content="http://example.com/2025/07/27/STM32F103C8T6%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="CYZ的个人博客">
<meta property="og:description" content="STM32F103C8T6 微控制器入门学习笔记基于 STM32 标准外设库笔记概述本笔记以 STM32F103C8T6 为目标芯片，使用 Keil5 开发环境和 STM32 标准外设库（Standard Peripheral Library），，掌握基本的 MCU 编程和调试技能。 开发环境 目标芯片: STM32F103C8T6 (ARM Cortex-M3 内核) 开发工具: Keil MD">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-27T12:50:05.000Z">
<meta property="article:modified_time" content="2025-08-04T05:43:10.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="嵌入式">
<meta property="article:tag" content="MCU">
<meta property="article:tag" content="笔记">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2025/07/27/STM32F103C8T6%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>STM32F103C8T6微控制器入门学习笔记 | CYZ的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">CYZ的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/07/27/STM32F103C8T6%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/chino2.jpg">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CYZ的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          STM32F103C8T6微控制器入门学习笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-07-27 20:50:05" itemprop="dateCreated datePublished" datetime="2025-07-27T20:50:05+08:00">2025-07-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-08-04 13:43:10" itemprop="dateModified" datetime="2025-08-04T13:43:10+08:00">2025-08-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="STM32F103C8T6-微控制器入门学习笔记"><a href="#STM32F103C8T6-微控制器入门学习笔记" class="headerlink" title="STM32F103C8T6 微控制器入门学习笔记"></a>STM32F103C8T6 微控制器入门学习笔记</h1><h2 id="基于-STM32-标准外设库"><a href="#基于-STM32-标准外设库" class="headerlink" title="基于 STM32 标准外设库"></a>基于 STM32 标准外设库</h2><h2 id="笔记概述"><a href="#笔记概述" class="headerlink" title="笔记概述"></a>笔记概述</h2><p>本笔记以 STM32F103C8T6 为目标芯片，使用 Keil5 开发环境和 STM32 标准外设库（Standard Peripheral Library），，掌握基本的 MCU 编程和调试技能。</p>
<h3 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h3><ul>
<li><strong>目标芯片</strong>: STM32F103C8T6 (ARM Cortex-M3 内核)</li>
<li><strong>开发工具</strong>: Keil MDK-ARM 5</li>
<li><strong>库版本</strong>: STM32F10x Standard Peripheral Library V3.5.0</li>
<li><strong>调试器</strong>: ST-Link V2</li>
</ul>
<span id="more"></span>

<h3 id="工程模板配置"><a href="#工程模板配置" class="headerlink" title="工程模板配置"></a>工程模板配置</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.c 基本结构</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>  <span class="comment">// Device header</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-ARM-Cortex-M-架构与-LED-闪烁"><a href="#1-ARM-Cortex-M-架构与-LED-闪烁" class="headerlink" title="1.ARM Cortex-M 架构与 LED 闪烁"></a>1.ARM Cortex-M 架构与 LED 闪烁</h2><h3 id="1-1-ARM-Cortex-M3-架构概述"><a href="#1-1-ARM-Cortex-M3-架构概述" class="headerlink" title="1.1 ARM Cortex-M3 架构概述"></a>1.1 ARM Cortex-M3 架构概述</h3><h4 id="核心特性"><a href="#核心特性" class="headerlink" title="核心特性"></a>核心特性</h4><ul>
<li><strong>内核频率</strong>: 最高 72MHz</li>
<li><strong>Flash 存储</strong>: 64KB</li>
<li><strong>SRAM</strong>: 20KB</li>
<li><strong>GPIO 端口</strong>: PA0-PA15, PB0-PB15, PC13-PC15</li>
<li><strong>外设总线</strong>: APB1(36MHz), APB2(72MHz)</li>
</ul>
<h3 id="1-2-GPIO-标准库操作"><a href="#1-2-GPIO-标准库操作" class="headerlink" title="1.2 GPIO 标准库操作"></a>1.2 GPIO 标准库操作</h3><h4 id="GPIO-配置结构体"><a href="#GPIO-配置结构体" class="headerlink" title="GPIO 配置结构体"></a>GPIO 配置结构体</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">uint16_t</span> GPIO_Pin;           <span class="comment">// 引脚选择</span></span><br><span class="line">    GPIOSpeed_TypeDef GPIO_Speed; <span class="comment">// 速度设置</span></span><br><span class="line">    GPIOMode_TypeDef GPIO_Mode;   <span class="comment">// 模式设置</span></span><br><span class="line">&#125; GPIO_InitTypeDef;</span><br></pre></td></tr></table></figure>

<h4 id="GPIO-模式选项"><a href="#GPIO-模式选项" class="headerlink" title="GPIO 模式选项"></a>GPIO 模式选项</h4><ul>
<li><strong>输入模式</strong>: GPIO_Mode_IN_FLOATING, GPIO_Mode_IPU, GPIO_Mode_IPD, GPIO_Mode_AIN</li>
<li><strong>输出模式</strong>: GPIO_Mode_Out_PP, GPIO_Mode_Out_OD</li>
<li><strong>复用模式</strong>: GPIO_Mode_AF_PP, GPIO_Mode_AF_OD</li>
</ul>
<h4 id="GPIO-配置模板"><a href="#GPIO-配置模板" class="headerlink" title="GPIO 配置模板"></a>GPIO 配置模板</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   GPIO_InitTypeDef GPIO_InitStruct; <span class="comment">//定义初始化结构体</span></span><br><span class="line"></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE); <span class="comment">//打开GPIOA的时钟，此处为APB2</span></span><br><span class="line"></span><br><span class="line">GPIO_InitStruct.GPIO_Mode = GPIO_Mode_Out_PP; <span class="comment">//设置为推挽输出</span></span><br><span class="line">GPIO_InitStruct.GPIO_Pin = GPIO_Pin_All; <span class="comment">//打开所有引脚</span></span><br><span class="line">GPIO_InitStruct.GPIO_Speed = GPIO_Speed_50MHz; <span class="comment">//速度选择50MHz</span></span><br><span class="line"></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStruct); <span class="comment">//初始化GPIOA</span></span><br></pre></td></tr></table></figure>

<h4 id="GPIO-常用标准库函数"><a href="#GPIO-常用标准库函数" class="headerlink" title="GPIO 常用标准库函数"></a>GPIO 常用标准库函数</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">GPIO_DeInit</span><span class="params">(GPIO_TypeDef* GPIOx)</span>;<span class="comment">//将指定 GPIO 端口 GPIOx 的所有寄存器恢复到其默认的复位值。这通常用于在重新配置端口前，确保其处于一个已知的初始状态。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_AFIODeInit</span><span class="params">(<span class="type">void</span>)</span>;<span class="comment">//将 AFIO (Alternate Function I/O) 相关的寄存器恢复到复位值。AFIO 主要用于引脚重映射和外部中断的配置。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Init</span><span class="params">(GPIO_TypeDef* GPIOx, GPIO_InitTypeDef* GPIO_InitStruct)</span>;<span class="comment">// 核心初始化函数。根据 GPIO_InitStruct 结构体中定义的参数，来初始化指定 GPIO 端口 GPIOx 的一个或多个引脚。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_StructInit</span><span class="params">(GPIO_InitTypeDef* GPIO_InitStruct)</span>;<span class="comment">//一个辅助函数，用于将 GPIO_InitTypeDef 结构体变量填充为默认值。这可以防止因忘记初始化某些成员而导致的配置错误。</span></span><br><span class="line"></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">GPIO_ReadInputDataBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;<span class="comment">//读取指定 GPIO 端口 GPIOx 上某个输入引脚 GPIO_Pin 的电平状态。返回值Bit_SET (1) 或 Bit_RESET (0)。</span></span><br><span class="line"></span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">GPIO_ReadInputData</span><span class="params">(GPIO_TypeDef* GPIOx)</span>;<span class="comment">//读取指定 GPIO 端口 GPIOx 上所有输入引脚（16个）的电平状态。返回值一个 16 位的值，每一位对应一个引脚的状态。</span></span><br><span class="line"></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">GPIO_ReadOutputDataBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;<span class="comment">//读取你上次通过程序向某个输出引脚写入的值。它读取的是输出数据寄存器（ODR）的值，而不是引脚的实际物理电平。</span></span><br><span class="line"></span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">GPIO_ReadOutputData</span><span class="params">(GPIO_TypeDef* GPIOx)</span>;<span class="comment">//读取指定 GPIO 端口 GPIOx 的整个输出数据寄存器（ODR）的值。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_SetBits</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;<span class="comment">// 将指定的一个或多个引脚的输出设置为高电平 (逻辑 1)。这是一个原子操作，不会影响同一端口的其他引脚。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_ResetBits</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;<span class="comment">//将指定的一个或多个引脚的输出设置为低电平 (逻辑 0)。这也是一个原子操作。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_WriteBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin, BitAction BitVal)</span>;<span class="comment">//根据 BitVal 的值，将指定的单个引脚设置为高电平或低电平。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Write</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> PortVal)</span>;<span class="comment">//向整个 GPIO 端口（16个引脚）的输出数据寄存器（ODR）写入一个 16 位的值。这会同时改变所有16个引脚的输出状态。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_PinLockConfig</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;<span class="comment">//锁定指定引脚的配置。一旦锁定，该引脚的配置（模式、速度等）将不能被修改，直到下一次系统复位。这是一个安全特性，防止程序意外修改重要引脚的配置。使用较少</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EventOutputConfig</span><span class="params">(<span class="type">uint8_t</span> GPIO_PortSource, <span class="type">uint8_t</span> GPIO_PinSource)</span>;<span class="comment">//配置 GPIO 以产生一个内部事件（EVENTOUT），该事件可以连接到其他外设（如定时器）作为触发信号，而不需要通过中断，从而实现硬件级的联动。不常用，用于特定的低功耗和硬件同步场景。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EventOutputCmd</span><span class="params">(FunctionalState NewState)</span>;<span class="comment">//使能或禁止通过 GPIO_EventOutputConfig 函数</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_PinRemapConfig</span><span class="params">(<span class="type">uint32_t</span> GPIO_Remap, FunctionalState NewState)</span>;<span class="comment">//引脚功能重映射。将某些外设（如 USART, I2C, SPI, TIM 等）的默认引脚映射到另一组备用引脚上。当默认引脚被占用或PCB布线不便时非常有用。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EXTILineConfig</span><span class="params">(<span class="type">uint8_t</span> GPIO_PortSource, <span class="type">uint8_t</span> GPIO_PinSource)</span>;<span class="comment">// 配置外部中断线。将一个指定的 GPIO 引脚连接到 EXTI (外部中断/事件控制器) 的一条线上，从而使该引脚能够触发中断。</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_ETH_MediaInterfaceConfig</span><span class="params">(<span class="type">uint32_t</span> GPIO_ETH_MediaInterface)</span>;<span class="comment">//专门用于配置以太网（ETH）外设的物理媒体接口（MII 或 RMII）。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="第二周：串口通信基础"><a href="#第二周：串口通信基础" class="headerlink" title="第二周：串口通信基础"></a>第二周：串口通信基础</h2><h3 id="2-1-USART-标准库配置"><a href="#2-1-USART-标准库配置" class="headerlink" title="2.1 USART 标准库配置"></a>2.1 USART 标准库配置</h3><h4 id="USART-配置结构体"><a href="#USART-配置结构体" class="headerlink" title="USART 配置结构体"></a>USART 配置结构体</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">uint32_t</span> USART_BaudRate;            <span class="comment">// 波特率</span></span><br><span class="line">    <span class="type">uint16_t</span> USART_WordLength;          <span class="comment">// 数据位长度</span></span><br><span class="line">    <span class="type">uint16_t</span> USART_StopBits;            <span class="comment">// 停止位</span></span><br><span class="line">    <span class="type">uint16_t</span> USART_Parity;              <span class="comment">// 校验位</span></span><br><span class="line">    <span class="type">uint16_t</span> USART_HardwareFlowControl; <span class="comment">// 硬件流控</span></span><br><span class="line">    <span class="type">uint16_t</span> USART_Mode;                <span class="comment">// 工作模式</span></span><br><span class="line">&#125; USART_InitTypeDef;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-串口通信"><a href="#2-2-串口通信" class="headerlink" title="2.2 串口通信"></a>2.2 串口通信</h3><h4 id="完整代码实现"><a href="#完整代码实现" class="headerlink" title="完整代码实现"></a>完整代码实现</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">uint8_t</span> Serial_RxData;		<span class="comment">//定义串口接收的数据变量</span></span><br><span class="line"><span class="type">uint8_t</span> Serial_RxFlag;		<span class="comment">//定义串口接收的标志位变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：串口初始化</span></span><br><span class="line"><span class="comment">  * 参    数：无</span></span><br><span class="line"><span class="comment">  * 返 回 值：无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/*开启时钟*/</span></span><br><span class="line">	RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);	<span class="comment">//开启USART1的时钟</span></span><br><span class="line">	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);	<span class="comment">//开启GPIOA的时钟</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*GPIO初始化*/</span></span><br><span class="line">	GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;</span><br><span class="line">	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;</span><br><span class="line">	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">	GPIO_Init(GPIOA, &amp;GPIO_InitStructure);					<span class="comment">//将PA9引脚初始化为复用推挽输出</span></span><br><span class="line"></span><br><span class="line">	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;</span><br><span class="line">	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;</span><br><span class="line">	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">	GPIO_Init(GPIOA, &amp;GPIO_InitStructure);					<span class="comment">//将PA10引脚初始化为上拉输入</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*USART初始化*/</span></span><br><span class="line">	USART_InitTypeDef USART_InitStructure;					<span class="comment">//定义结构体变量</span></span><br><span class="line">	USART_InitStructure.USART_BaudRate = <span class="number">9600</span>;				<span class="comment">//波特率</span></span><br><span class="line">	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;	<span class="comment">//硬件流控制，不需要</span></span><br><span class="line">	USART_InitStructure.USART_Mode = USART_Mode_Tx | USART_Mode_Rx;	<span class="comment">//模式，发送模式和接收模式均选择</span></span><br><span class="line">	USART_InitStructure.USART_Parity = USART_Parity_No;		<span class="comment">//奇偶校验，不需要</span></span><br><span class="line">	USART_InitStructure.USART_StopBits = USART_StopBits_1;	<span class="comment">//停止位，选择1位</span></span><br><span class="line">	USART_InitStructure.USART_WordLength = USART_WordLength_8b;		<span class="comment">//字长，选择8位</span></span><br><span class="line">	USART_Init(USART1, &amp;USART_InitStructure);				<span class="comment">//将结构体变量交给USART_Init，配置USART1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*中断输出配置*/</span></span><br><span class="line">	USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);			<span class="comment">//开启串口接收数据的中断</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*NVIC中断分组*/</span></span><br><span class="line">	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);			<span class="comment">//配置NVIC为分组2</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*NVIC配置*/</span></span><br><span class="line">	NVIC_InitTypeDef NVIC_InitStructure;					<span class="comment">//定义结构体变量</span></span><br><span class="line">	NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;		<span class="comment">//选择配置NVIC的USART1线</span></span><br><span class="line">	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;			<span class="comment">//指定NVIC线路使能</span></span><br><span class="line">	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">1</span>;		<span class="comment">//指定NVIC线路的抢占优先级为1</span></span><br><span class="line">	NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">1</span>;		<span class="comment">//指定NVIC线路的响应优先级为1</span></span><br><span class="line">	NVIC_Init(&amp;NVIC_InitStructure);							<span class="comment">//将结构体变量交给NVIC_Init，配置NVIC外设</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*USART使能*/</span></span><br><span class="line">	USART_Cmd(USART1, ENABLE);								<span class="comment">//使能USART1，串口开始运行</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：串口发送一个字节</span></span><br><span class="line"><span class="comment">  * 参    数：Byte 要发送的一个字节</span></span><br><span class="line"><span class="comment">  * 返 回 值：无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_SendByte</span><span class="params">(<span class="type">uint8_t</span> Byte)</span></span><br><span class="line">&#123;</span><br><span class="line">	USART_SendData(USART1, Byte);		<span class="comment">//将字节数据写入数据寄存器，写入后USART自动生成时序波形</span></span><br><span class="line">	<span class="keyword">while</span> (USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);	<span class="comment">//等待发送完成</span></span><br><span class="line">	<span class="comment">/*下次写入数据寄存器会自动清除发送完成标志位，故此循环后，无需清除标志位*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：串口发送一个数组</span></span><br><span class="line"><span class="comment">  * 参    数：Array 要发送数组的首地址</span></span><br><span class="line"><span class="comment">  * 参    数：Length 要发送数组的长度</span></span><br><span class="line"><span class="comment">  * 返 回 值：无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_SendArray</span><span class="params">(<span class="type">uint8_t</span> *Array, <span class="type">uint16_t</span> Length)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">uint16_t</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; Length; i ++)		<span class="comment">//遍历数组</span></span><br><span class="line">	&#123;</span><br><span class="line">		Serial_SendByte(Array[i]);		<span class="comment">//依次调用Serial_SendByte发送每个字节数据</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：串口发送一个字符串</span></span><br><span class="line"><span class="comment">  * 参    数：String 要发送字符串的首地址</span></span><br><span class="line"><span class="comment">  * 返 回 值：无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_SendString</span><span class="params">(<span class="type">char</span> *String)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">uint8_t</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; String[i] != <span class="string">&#x27;\0&#x27;</span>; i ++)<span class="comment">//遍历字符数组（字符串），遇到字符串结束标志位后停止</span></span><br><span class="line">	&#123;</span><br><span class="line">		Serial_SendByte(String[i]);		<span class="comment">//依次调用Serial_SendByte发送每个字节数据</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：次方函数（内部使用）</span></span><br><span class="line"><span class="comment">  * 返 回 值：返回值等于X的Y次方</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">uint32_t</span> <span class="title function_">Serial_Pow</span><span class="params">(<span class="type">uint32_t</span> X, <span class="type">uint32_t</span> Y)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">uint32_t</span> Result = <span class="number">1</span>;	<span class="comment">//设置结果初值为1</span></span><br><span class="line">	<span class="keyword">while</span> (Y --)			<span class="comment">//执行Y次</span></span><br><span class="line">	&#123;</span><br><span class="line">		Result *= X;		<span class="comment">//将X累乘到结果</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> Result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：串口发送数字</span></span><br><span class="line"><span class="comment">  * 参    数：Number 要发送的数字，范围：0~4294967295</span></span><br><span class="line"><span class="comment">  * 参    数：Length 要发送数字的长度，范围：0~10</span></span><br><span class="line"><span class="comment">  * 返 回 值：无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_SendNumber</span><span class="params">(<span class="type">uint32_t</span> Number, <span class="type">uint8_t</span> Length)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">uint8_t</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; Length; i ++)		<span class="comment">//根据数字长度遍历数字的每一位</span></span><br><span class="line">	&#123;</span><br><span class="line">		Serial_SendByte(Number / Serial_Pow(<span class="number">10</span>, Length - i - <span class="number">1</span>) % <span class="number">10</span> + <span class="string">&#x27;0&#x27;</span>);	<span class="comment">//依次调用Serial_SendByte发送每位数字</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：使用printf需要重定向的底层函数</span></span><br><span class="line"><span class="comment">  * 参    数：保持原始格式即可，无需变动</span></span><br><span class="line"><span class="comment">  * 返 回 值：保持原始格式即可，无需变动</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">fputc</span><span class="params">(<span class="type">int</span> ch, FILE *f)</span></span><br><span class="line">&#123;</span><br><span class="line">	Serial_SendByte(ch);			<span class="comment">//将printf的底层重定向到自己的发送字节函数</span></span><br><span class="line">	<span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：自己封装的prinf函数</span></span><br><span class="line"><span class="comment">  * 参    数：format 格式化字符串</span></span><br><span class="line"><span class="comment">  * 参    数：... 可变的参数列表</span></span><br><span class="line"><span class="comment">  * 返 回 值：无</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Serial_Printf</span><span class="params">(<span class="type">char</span> *format, ...)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> String[<span class="number">100</span>];				<span class="comment">//定义字符数组</span></span><br><span class="line">	va_list arg;					<span class="comment">//定义可变参数列表数据类型的变量arg</span></span><br><span class="line">	va_start(arg, format);			<span class="comment">//从format开始，接收参数列表到arg变量</span></span><br><span class="line">	<span class="built_in">vsprintf</span>(String, format, arg);	<span class="comment">//使用vsprintf打印格式化字符串和参数列表到字符数组中</span></span><br><span class="line">	va_end(arg);					<span class="comment">//结束变量arg</span></span><br><span class="line">	Serial_SendString(String);		<span class="comment">//串口发送字符数组（字符串）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：获取串口接收标志位</span></span><br><span class="line"><span class="comment">  * 参    数：无</span></span><br><span class="line"><span class="comment">  * 返 回 值：串口接收标志位，范围：0~1，接收到数据后，标志位置1，读取后标志位自动清零</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Serial_GetRxFlag</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (Serial_RxFlag == <span class="number">1</span>)			<span class="comment">//如果标志位为1</span></span><br><span class="line">	&#123;</span><br><span class="line">		Serial_RxFlag = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;					<span class="comment">//则返回1，并自动清零标志位</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;						<span class="comment">//如果标志位为0，则返回0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：获取串口接收的数据</span></span><br><span class="line"><span class="comment">  * 参    数：无</span></span><br><span class="line"><span class="comment">  * 返 回 值：接收的数据，范围：0~255</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">Serial_GetRxData</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> Serial_RxData;			<span class="comment">//返回接收的数据变量</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 函    数：USART1中断函数</span></span><br><span class="line"><span class="comment">  * 参    数：无</span></span><br><span class="line"><span class="comment">  * 返 回 值：无</span></span><br><span class="line"><span class="comment">  * 注意事项：此函数为中断函数，无需调用，中断触发后自动执行</span></span><br><span class="line"><span class="comment">  *           函数名为预留的指定名称，可以从启动文件复制</span></span><br><span class="line"><span class="comment">  *           请确保函数名正确，不能有任何差异，否则中断函数将不能进入</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">USART1_IRQHandler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (USART_GetITStatus(USART1, USART_IT_RXNE) == SET)		<span class="comment">//判断是否是USART1的接收事件触发的中断</span></span><br><span class="line">	&#123;</span><br><span class="line">		Serial_RxData = USART_ReceiveData(USART1);				<span class="comment">//读取数据寄存器，存放在接收的数据变量</span></span><br><span class="line">		Serial_RxFlag = <span class="number">1</span>;										<span class="comment">//置接收标志位变量为1</span></span><br><span class="line">		USART_ClearITPendingBit(USART1, USART_IT_RXNE);			<span class="comment">//清除USART1的RXNE标志位</span></span><br><span class="line">																<span class="comment">//读取数据寄存器会自动清除此标志位</span></span><br><span class="line">																<span class="comment">//如果已经读取了数据寄存器，也可以不执行此代码</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="第三周：中断处理机制与按键中断"><a href="#第三周：中断处理机制与按键中断" class="headerlink" title="第三周：中断处理机制与按键中断"></a>第三周：中断处理机制与按键中断</h2><h3 id="3-1-NVIC-标准库配置"><a href="#3-1-NVIC-标准库配置" class="headerlink" title="3.1 NVIC 标准库配置"></a>3.1 NVIC 标准库配置</h3><h4 id="NVIC-配置结构体"><a href="#NVIC-配置结构体" class="headerlink" title="NVIC 配置结构体"></a>NVIC 配置结构体</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">uint8_t</span> NVIC_IRQChannel;                    <span class="comment">// 中断通道</span></span><br><span class="line">    <span class="type">uint8_t</span> NVIC_IRQChannelPreemptionPriority;  <span class="comment">// 抢占优先级</span></span><br><span class="line">    <span class="type">uint8_t</span> NVIC_IRQChannelSubPriority;         <span class="comment">// 响应优先级</span></span><br><span class="line">    FunctionalState NVIC_IRQChannelCmd;         <span class="comment">// 中断使能</span></span><br><span class="line">&#125; NVIC_InitTypeDef;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-EXTI-标准库配置"><a href="#3-2-EXTI-标准库配置" class="headerlink" title="3.2 EXTI 标准库配置"></a>3.2 EXTI 标准库配置</h3><h4 id="EXTI-配置结构体"><a href="#EXTI-配置结构体" class="headerlink" title="EXTI 配置结构体"></a>EXTI 配置结构体</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">uint32_t</span> EXTI_Line;               <span class="comment">// 中断线</span></span><br><span class="line">    EXTIMode_TypeDef EXTI_Mode;       <span class="comment">// 中断模式</span></span><br><span class="line">    EXTITrigger_TypeDef EXTI_Trigger; <span class="comment">// 触发方式</span></span><br><span class="line">    FunctionalState EXTI_LineCmd;     <span class="comment">// 中断线使能</span></span><br><span class="line">&#125; EXTI_InitTypeDef;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-按键中断"><a href="#3-3-按键中断" class="headerlink" title="3.3 按键中断"></a>3.3 按键中断</h3><h4 id="完整代码实现-1"><a href="#完整代码实现-1" class="headerlink" title="完整代码实现"></a>完整代码实现</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x_gpio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x_rcc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x_exti.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;misc.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">LED_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">KEY_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI0_IRQHandler</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    SystemClock_Config();</span><br><span class="line">    LED_Init();</span><br><span class="line">    KEY_Init();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 主循环空闲，等待中断</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">LED_Init</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line"></span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);</span><br><span class="line"></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_13;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;</span><br><span class="line">    GPIO_Init(GPIOC, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">    GPIO_SetBits(GPIOC, GPIO_Pin_13);  <span class="comment">// LED初始熄灭</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">KEY_Init</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    EXTI_InitTypeDef EXTI_InitStructure;</span><br><span class="line">    NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使能时钟</span></span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置PA0为下拉输入</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPD;  <span class="comment">// 下拉输入</span></span><br><span class="line">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置EXTI线</span></span><br><span class="line">    GPIO_EXTILineConfig(GPIO_PortSourceGPIOA, GPIO_PinSource0);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置EXTI0</span></span><br><span class="line">    EXTI_InitStructure.EXTI_Line = EXTI_Line0;</span><br><span class="line">    EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;</span><br><span class="line">    EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Rising;  <span class="comment">// 上升沿触发</span></span><br><span class="line">    EXTI_InitStructure.EXTI_LineCmd = ENABLE;</span><br><span class="line">    EXTI_Init(&amp;EXTI_InitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置NVIC</span></span><br><span class="line">    NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = EXTI0_IRQn;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">2</span>;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0</span>;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中断服务函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI0_IRQHandler</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(EXTI_GetITStatus(EXTI_Line0) != RESET) &#123;</span><br><span class="line">        <span class="comment">// 简单的软件消抖</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">volatile</span> <span class="type">uint32_t</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0) == Bit_SET) &#123;</span><br><span class="line">            <span class="comment">// 按键确实按下，翻转LED状态</span></span><br><span class="line">            <span class="keyword">if</span>(GPIO_ReadOutputDataBit(GPIOC, GPIO_Pin_13) == Bit_SET) &#123;</span><br><span class="line">                GPIO_ResetBits(GPIOC, GPIO_Pin_13);  <span class="comment">// LED点亮</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                GPIO_SetBits(GPIOC, GPIO_Pin_13);    <span class="comment">// LED熄灭</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 清除中断标志</span></span><br><span class="line">        EXTI_ClearITPendingBit(EXTI_Line0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="按键消抖处理"><a href="#按键消抖处理" class="headerlink" title="按键消抖处理"></a>按键消抖处理</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 硬件消抖电路：RC滤波</span></span><br><span class="line"><span class="comment">// 软件消抖方法：延时确认</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Key_Scan</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">uint8_t</span> key_state = <span class="number">0</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">uint32_t</span> key_time = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0) == Bit_SET) &#123;</span><br><span class="line">        <span class="keyword">if</span>(key_state == <span class="number">0</span>) &#123;</span><br><span class="line">            key_time = <span class="number">0</span>;</span><br><span class="line">            key_state = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(key_state == <span class="number">1</span>) &#123;</span><br><span class="line">            key_time++;</span><br><span class="line">            <span class="keyword">if</span>(key_time &gt; <span class="number">10</span>) &#123;  <span class="comment">// 10ms消抖时间</span></span><br><span class="line">                key_state = <span class="number">2</span>;</span><br><span class="line">                <span class="comment">// 执行按键动作</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        key_state = <span class="number">0</span>;</span><br><span class="line">        key_time = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="第四周：定时器应用"><a href="#第四周：定时器应用" class="headerlink" title="第四周：定时器应用"></a>第四周：定时器应用</h2><h3 id="4-1-TIM-标准库配置"><a href="#4-1-TIM-标准库配置" class="headerlink" title="4.1 TIM 标准库配置"></a>4.1 TIM 标准库配置</h3><h4 id="TIM-基本配置结构体"><a href="#TIM-基本配置结构体" class="headerlink" title="TIM 基本配置结构体"></a>TIM 基本配置结构体</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">uint16_t</span> TIM_Prescaler;          <span class="comment">// 预分频器</span></span><br><span class="line">    <span class="type">uint16_t</span> TIM_CounterMode;        <span class="comment">// 计数模式</span></span><br><span class="line">    <span class="type">uint16_t</span> TIM_Period;             <span class="comment">// 自动重装载值</span></span><br><span class="line">    <span class="type">uint16_t</span> TIM_ClockDivision;      <span class="comment">// 时钟分频</span></span><br><span class="line">    <span class="type">uint8_t</span> TIM_RepetitionCounter;   <span class="comment">// 重复计数器（高级定时器）</span></span><br><span class="line">&#125; TIM_TimeBaseInitTypeDef;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-第四周项目：定时器应用"><a href="#4-2-第四周项目：定时器应用" class="headerlink" title="4.2 第四周项目：定时器应用"></a>4.2 第四周项目：定时器应用</h3><h4 id="方案一：定时器中断实现精确延时"><a href="#方案一：定时器中断实现精确延时" class="headerlink" title="方案一：定时器中断实现精确延时"></a>方案一：定时器中断实现精确延时</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x_gpio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x_rcc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x_tim.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;misc.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">LED_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM2_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM2_IRQHandler</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">volatile</span> <span class="type">uint32_t</span> TimingDelay = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    SystemClock_Config();</span><br><span class="line">    LED_Init();</span><br><span class="line">    TIM2_Init();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">        GPIO_ResetBits(GPIOC, GPIO_Pin_13);  <span class="comment">// LED点亮</span></span><br><span class="line">        Delay_ms(<span class="number">1000</span>);</span><br><span class="line">        GPIO_SetBits(GPIOC, GPIO_Pin_13);    <span class="comment">// LED熄灭</span></span><br><span class="line">        Delay_ms(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM2_Init</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;</span><br><span class="line">    NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使能TIM2时钟</span></span><br><span class="line">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置TIM2：1ms中断一次</span></span><br><span class="line">    <span class="comment">// TIM2时钟 = 72MHz，预分频后 = 72MHz/7200 = 10KHz</span></span><br><span class="line">    <span class="comment">// 计数周期 = 10KHz/10 = 1KHz，即1ms</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_Period = <span class="number">9</span>;         <span class="comment">// 自动重装载值</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_Prescaler = <span class="number">7199</span>;   <span class="comment">// 预分频器</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;</span><br><span class="line">    TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;</span><br><span class="line">    TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使能TIM2更新中断</span></span><br><span class="line">    TIM_ITConfig(TIM2, TIM_IT_Update, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置NVIC</span></span><br><span class="line">    NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">3</span>;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0</span>;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启动定时器</span></span><br><span class="line">    TIM_Cmd(TIM2, ENABLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM2_IRQHandler</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(TIM_GetITStatus(TIM2, TIM_IT_Update) != RESET) &#123;</span><br><span class="line">        <span class="keyword">if</span>(TimingDelay &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            TimingDelay--;</span><br><span class="line">        &#125;</span><br><span class="line">        TIM_ClearITPendingBit(TIM2, TIM_IT_Update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay_ms</span><span class="params">(<span class="type">uint32_t</span> nTime)</span> &#123;</span><br><span class="line">    TimingDelay = nTime;</span><br><span class="line">    <span class="keyword">while</span>(TimingDelay != <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方案二：PWM-输出控制-LED-亮度"><a href="#方案二：PWM-输出控制-LED-亮度" class="headerlink" title="方案二：PWM 输出控制 LED 亮度"></a>方案二：PWM 输出控制 LED 亮度</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">TIM3_PWM_Init</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;</span><br><span class="line">    TIM_OCInitTypeDef TIM_OCInitStructure;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使能时钟</span></span><br><span class="line">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM3, ENABLE);</span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置PA6为TIM3_CH1输出</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;</span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TIM3基本配置：PWM频率1KHz</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_Period = <span class="number">999</span>;       <span class="comment">// ARR = 999</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_Prescaler = <span class="number">71</span>;     <span class="comment">// PSC = 71，72MHz/72 = 1MHz</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;</span><br><span class="line">    TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;</span><br><span class="line">    TIM_TimeBaseInit(TIM3, &amp;TIM_TimeBaseStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// PWM输出配置</span></span><br><span class="line">    TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM1;</span><br><span class="line">    TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable;</span><br><span class="line">    TIM_OCInitStructure.TIM_Pulse = <span class="number">500</span>;          <span class="comment">// 占空比50%</span></span><br><span class="line">    TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High;</span><br><span class="line">    TIM_OC1Init(TIM3, &amp;TIM_OCInitStructure);</span><br><span class="line"></span><br><span class="line">    TIM_OC1PreloadConfig(TIM3, TIM_OCPreload_Enable);</span><br><span class="line">    TIM_ARRPreloadConfig(TIM3, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启动定时器</span></span><br><span class="line">    TIM_Cmd(TIM3, ENABLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PWM占空比调节函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_SetPWMDuty</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint8_t</span> channel, <span class="type">uint16_t</span> duty)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span>(channel) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: TIM_SetCompare1(TIMx, duty); <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: TIM_SetCompare2(TIMx, duty); <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: TIM_SetCompare3(TIMx, duty); <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: TIM_SetCompare4(TIMx, duty); <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="方案三：输入捕获测量频率"><a href="#方案三：输入捕获测量频率" class="headerlink" title="方案三：输入捕获测量频率"></a>方案三：输入捕获测量频率</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">TIM4_IC_Init</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;</span><br><span class="line">    TIM_ICInitTypeDef TIM_ICInitStructure;</span><br><span class="line">    NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使能时钟</span></span><br><span class="line">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4, ENABLE);</span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置PB6为TIM4_CH1输入</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class="line">    GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TIM4基本配置</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_Period = <span class="number">0xFFFF</span>;</span><br><span class="line">    TIM_TimeBaseStructure.TIM_Prescaler = <span class="number">71</span>;     <span class="comment">// 1MHz计数频率</span></span><br><span class="line">    TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;</span><br><span class="line">    TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;</span><br><span class="line">    TIM_TimeBaseInit(TIM4, &amp;TIM_TimeBaseStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输入捕获配置</span></span><br><span class="line">    TIM_ICInitStructure.TIM_Channel = TIM_Channel_1;</span><br><span class="line">    TIM_ICInitStructure.TIM_ICPolarity = TIM_ICPolarity_Rising;</span><br><span class="line">    TIM_ICInitStructure.TIM_ICSelection = TIM_ICSelection_DirectTI;</span><br><span class="line">    TIM_ICInitStructure.TIM_ICPrescaler = TIM_ICPSC_DIV1;</span><br><span class="line">    TIM_ICInitStructure.TIM_ICFilter = <span class="number">0x0F</span>;</span><br><span class="line">    TIM_ICInit(TIM4, &amp;TIM_ICInitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使能捕获中断</span></span><br><span class="line">    TIM_ITConfig(TIM4, TIM_IT_CC1, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// NVIC配置</span></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = TIM4_IRQn;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">1</span>;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0</span>;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class="line"></span><br><span class="line">    TIM_Cmd(TIM4, ENABLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="调试技巧总结"><a href="#调试技巧总结" class="headerlink" title="调试技巧总结"></a>调试技巧总结</h2><h3 id="1-Keil5-调试配置"><a href="#1-Keil5-调试配置" class="headerlink" title="1. Keil5 调试配置"></a>1. Keil5 调试配置</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Debug配置选项</span></span><br><span class="line"><span class="comment">// Settings -&gt; Debug -&gt; Use: ST-Link Debugger</span></span><br><span class="line"><span class="comment">// Settings -&gt; Flash Download -&gt; Reset and Run</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调试时查看外设寄存器</span></span><br><span class="line"><span class="comment">// View -&gt; Peripheral -&gt; General Purpose I/O</span></span><br><span class="line"><span class="comment">// View -&gt; Peripheral -&gt; Timer</span></span><br><span class="line"><span class="comment">// View -&gt; Peripheral -&gt; USART</span></span><br></pre></td></tr></table></figure>

<h3 id="2-标准库调试函数"><a href="#2-标准库调试函数" class="headerlink" title="2. 标准库调试函数"></a>2. 标准库调试函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 断言宏配置</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> USE_FULL_ASSERT</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">assert_failed</span><span class="params">(<span class="type">uint8_t</span>* file, <span class="type">uint32_t</span> line)</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Wrong parameters value: file %s on line %d\r\n&quot;</span>, file, line);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误处理函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Error_Handler</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Error occurred!\r\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// LED快速闪烁表示错误</span></span><br><span class="line">        GPIO_ToggleBits(GPIOC, GPIO_Pin_13);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">volatile</span> <span class="type">uint32_t</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-串口调试输出"><a href="#3-串口调试输出" class="headerlink" title="3. 串口调试输出"></a>3. 串口调试输出</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 系统状态监控</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">System_Monitor</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;System Clock: %d Hz\r\n&quot;</span>, SystemCoreClock);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;HCLK: %d Hz\r\n&quot;</span>, HAL_RCC_GetHCLKFreq());</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;PCLK1: %d Hz\r\n&quot;</span>, HAL_RCC_GetPCLK1Freq());</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;PCLK2: %d Hz\r\n&quot;</span>, HAL_RCC_GetPCLK2Freq());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GPIO状态查看</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Status_Print</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;GPIOA IDR: 0x%04X\r\n&quot;</span>, GPIOA-&gt;IDR);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;GPIOB IDR: 0x%04X\r\n&quot;</span>, GPIOB-&gt;IDR);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;GPIOC IDR: 0x%04X\r\n&quot;</span>, GPIOC-&gt;IDR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="标准库函数速查表"><a href="#标准库函数速查表" class="headerlink" title="标准库函数速查表"></a>标准库函数速查表</h2><h3 id="GPIO-函数"><a href="#GPIO-函数" class="headerlink" title="GPIO 函数"></a>GPIO 函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化和控制</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Init</span><span class="params">(GPIO_TypeDef* GPIOx, GPIO_InitTypeDef* GPIO_InitStruct)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_SetBits</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_ResetBits</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_WriteBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin, BitAction BitVal)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_Write</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> PortVal)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取函数</span></span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">GPIO_ReadInputDataBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;</span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">GPIO_ReadInputData</span><span class="params">(GPIO_TypeDef* GPIOx)</span>;</span><br><span class="line"><span class="type">uint8_t</span> <span class="title function_">GPIO_ReadOutputDataBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span>;</span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">GPIO_ReadOutputData</span><span class="params">(GPIO_TypeDef* GPIOx)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="RCC-函数"><a href="#RCC-函数" class="headerlink" title="RCC 函数"></a>RCC 函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 时钟控制</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_APB1PeriphClockCmd</span><span class="params">(<span class="type">uint32_t</span> RCC_APB1Periph, FunctionalState NewState)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_APB2PeriphClockCmd</span><span class="params">(<span class="type">uint32_t</span> RCC_APB2Periph, FunctionalState NewState)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_AHBPeriphClockCmd</span><span class="params">(<span class="type">uint32_t</span> RCC_AHBPeriph, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 时钟配置</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_HSEConfig</span><span class="params">(<span class="type">uint8_t</span> RCC_HSE)</span>;</span><br><span class="line">ErrorStatus <span class="title function_">RCC_WaitForHSEStartUp</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_PLLConfig</span><span class="params">(<span class="type">uint32_t</span> RCC_PLLSource, <span class="type">uint32_t</span> RCC_PLLMul)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_PLLCmd</span><span class="params">(FunctionalState NewState)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">RCC_SYSCLKConfig</span><span class="params">(<span class="type">uint32_t</span> RCC_SYSCLKSource)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="USART-函数"><a href="#USART-函数" class="headerlink" title="USART 函数"></a>USART 函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化和配置</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">USART_Init</span><span class="params">(USART_TypeDef* USARTx, USART_InitTypeDef* USART_InitStruct)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">USART_Cmd</span><span class="params">(USART_TypeDef* USARTx, FunctionalState NewState)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">USART_ITConfig</span><span class="params">(USART_TypeDef* USARTx, <span class="type">uint16_t</span> USART_IT, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据传输</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">USART_SendData</span><span class="params">(USART_TypeDef* USARTx, <span class="type">uint16_t</span> Data)</span>;</span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">USART_ReceiveData</span><span class="params">(USART_TypeDef* USARTx)</span>;</span><br><span class="line">FlagStatus <span class="title function_">USART_GetFlagStatus</span><span class="params">(USART_TypeDef* USARTx, <span class="type">uint16_t</span> USART_FLAG)</span>;</span><br><span class="line">ITStatus <span class="title function_">USART_GetITStatus</span><span class="params">(USART_TypeDef* USARTx, <span class="type">uint16_t</span> USART_IT)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="TIM-函数"><a href="#TIM-函数" class="headerlink" title="TIM 函数"></a>TIM 函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本配置</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_TimeBaseInit</span><span class="params">(TIM_TypeDef* TIMx, TIM_TimeBaseInitTypeDef* TIM_TimeBaseInitStruct)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_Cmd</span><span class="params">(TIM_TypeDef* TIMx, FunctionalState NewState)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ITConfig</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_IT, FunctionalState NewState)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PWM配置</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_OC1Init</span><span class="params">(TIM_TypeDef* TIMx, TIM_OCInitTypeDef* TIM_OCInitStruct)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_SetCompare1</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> Compare1)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入捕获</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ICInit</span><span class="params">(TIM_TypeDef* TIMx, TIM_ICInitTypeDef* TIM_ICInitStruct)</span>;</span><br><span class="line"><span class="type">uint16_t</span> <span class="title function_">TIM_GetCapture1</span><span class="params">(TIM_TypeDef* TIMx)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 状态查询</span></span><br><span class="line">FlagStatus <span class="title function_">TIM_GetFlagStatus</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_FLAG)</span>;</span><br><span class="line">ITStatus <span class="title function_">TIM_GetITStatus</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_IT)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">TIM_ClearITPendingBit</span><span class="params">(TIM_TypeDef* TIMx, <span class="type">uint16_t</span> TIM_IT)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="EXTI-函数"><a href="#EXTI-函数" class="headerlink" title="EXTI 函数"></a>EXTI 函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_Init</span><span class="params">(EXTI_InitTypeDef* EXTI_InitStruct)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">GPIO_EXTILineConfig</span><span class="params">(<span class="type">uint8_t</span> GPIO_PortSource, <span class="type">uint8_t</span> GPIO_PinSource)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 状态查询</span></span><br><span class="line">FlagStatus <span class="title function_">EXTI_GetFlagStatus</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br><span class="line">ITStatus <span class="title function_">EXTI_GetITStatus</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_ClearFlag</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">EXTI_ClearITPendingBit</span><span class="params">(<span class="type">uint32_t</span> EXTI_Line)</span>;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="常用宏定义和枚举"><a href="#常用宏定义和枚举" class="headerlink" title="常用宏定义和枚举"></a>常用宏定义和枚举</h2><h3 id="GPIO-相关"><a href="#GPIO-相关" class="headerlink" title="GPIO 相关"></a>GPIO 相关</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GPIO引脚定义</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_Pin_0    ((uint16_t)0x0001)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_Pin_1    ((uint16_t)0x0002)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_Pin_13   ((uint16_t)0x2000)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_Pin_All  ((uint16_t)0xFFFF)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GPIO模式</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">enum</span> &#123;</span></span><br><span class="line">    GPIO_Mode_AIN = <span class="number">0x0</span>,           <span class="comment">// 模拟输入</span></span><br><span class="line">    GPIO_Mode_IN_FLOATING = <span class="number">0x04</span>,  <span class="comment">// 浮空输入</span></span><br><span class="line">    GPIO_Mode_IPD = <span class="number">0x28</span>,          <span class="comment">// 下拉输入</span></span><br><span class="line">    GPIO_Mode_IPU = <span class="number">0x48</span>,          <span class="comment">// 上拉输入</span></span><br><span class="line">    GPIO_Mode_Out_OD = <span class="number">0x14</span>,       <span class="comment">// 开漏输出</span></span><br><span class="line">    GPIO_Mode_Out_PP = <span class="number">0x10</span>,       <span class="comment">// 推挽输出</span></span><br><span class="line">    GPIO_Mode_AF_OD = <span class="number">0x1C</span>,        <span class="comment">// 复用开漏</span></span><br><span class="line">    GPIO_Mode_AF_PP = <span class="number">0x18</span>         <span class="comment">// 复用推挽</span></span><br><span class="line">&#125; GPIOMode_TypeDef;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GPIO速度</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">enum</span> &#123;</span></span><br><span class="line">    GPIO_Speed_10MHz = <span class="number">1</span>,</span><br><span class="line">    GPIO_Speed_2MHz,</span><br><span class="line">    GPIO_Speed_50MHz</span><br><span class="line">&#125; GPIOSpeed_TypeDef;</span><br></pre></td></tr></table></figure>

<h3 id="时钟相关"><a href="#时钟相关" class="headerlink" title="时钟相关"></a>时钟相关</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// APB2外设时钟</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB2Periph_AFIO    ((uint32_t)0x00000001)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB2Periph_GPIOA   ((uint32_t)0x00000004)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB2Periph_GPIOB   ((uint32_t)0x00000008)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB2Periph_GPIOC   ((uint32_t)0x00000010)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB2Periph_USART1  ((uint32_t)0x00004000)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// APB1外设时钟</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB1Periph_TIM2    ((uint32_t)0x00000001)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB1Periph_TIM3    ((uint32_t)0x00000002)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB1Periph_TIM4    ((uint32_t)0x00000004)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RCC_APB1Periph_USART2  ((uint32_t)0x00020000)</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" rel="tag"># 嵌入式</a>
              <a href="/tags/MCU/" rel="tag"># MCU</a>
              <a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"># 笔记</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/07/26/%E5%B5%8C%E5%85%A5%E5%BC%8Fai%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84/" rel="prev" title="嵌入式ai学习路径">
      <i class="fa fa-chevron-left"></i> 嵌入式ai学习路径
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#STM32F103C8T6-%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="nav-number">1.</span> <span class="nav-text">STM32F103C8T6 微控制器入门学习笔记</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E-STM32-%E6%A0%87%E5%87%86%E5%A4%96%E8%AE%BE%E5%BA%93"><span class="nav-number">1.1.</span> <span class="nav-text">基于 STM32 标准外设库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%94%E8%AE%B0%E6%A6%82%E8%BF%B0"><span class="nav-number">1.2.</span> <span class="nav-text">笔记概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="nav-number">1.2.1.</span> <span class="nav-text">开发环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.2.</span> <span class="nav-text">工程模板配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-ARM-Cortex-M-%E6%9E%B6%E6%9E%84%E4%B8%8E-LED-%E9%97%AA%E7%83%81"><span class="nav-number">1.3.</span> <span class="nav-text">1.ARM Cortex-M 架构与 LED 闪烁</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-ARM-Cortex-M3-%E6%9E%B6%E6%9E%84%E6%A6%82%E8%BF%B0"><span class="nav-number">1.3.1.</span> <span class="nav-text">1.1 ARM Cortex-M3 架构概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">核心特性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-GPIO-%E6%A0%87%E5%87%86%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="nav-number">1.3.2.</span> <span class="nav-text">1.2 GPIO 标准库操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GPIO-%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">GPIO 配置结构体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GPIO-%E6%A8%A1%E5%BC%8F%E9%80%89%E9%A1%B9"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">GPIO 模式选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GPIO-%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">GPIO 配置模板</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GPIO-%E5%B8%B8%E7%94%A8%E6%A0%87%E5%87%86%E5%BA%93%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.2.4.</span> <span class="nav-text">GPIO 常用标准库函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E5%91%A8%EF%BC%9A%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80"><span class="nav-number">1.4.</span> <span class="nav-text">第二周：串口通信基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-USART-%E6%A0%87%E5%87%86%E5%BA%93%E9%85%8D%E7%BD%AE"><span class="nav-number">1.4.1.</span> <span class="nav-text">2.1 USART 标准库配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#USART-%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">USART 配置结构体</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.2 串口通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">完整代码实现</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E5%91%A8%EF%BC%9A%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6%E4%B8%8E%E6%8C%89%E9%94%AE%E4%B8%AD%E6%96%AD"><span class="nav-number">1.5.</span> <span class="nav-text">第三周：中断处理机制与按键中断</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-NVIC-%E6%A0%87%E5%87%86%E5%BA%93%E9%85%8D%E7%BD%AE"><span class="nav-number">1.5.1.</span> <span class="nav-text">3.1 NVIC 标准库配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NVIC-%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">NVIC 配置结构体</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-EXTI-%E6%A0%87%E5%87%86%E5%BA%93%E9%85%8D%E7%BD%AE"><span class="nav-number">1.5.2.</span> <span class="nav-text">3.2 EXTI 标准库配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#EXTI-%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">EXTI 配置结构体</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E6%8C%89%E9%94%AE%E4%B8%AD%E6%96%AD"><span class="nav-number">1.5.3.</span> <span class="nav-text">3.3 按键中断</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">完整代码实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%89%E9%94%AE%E6%B6%88%E6%8A%96%E5%A4%84%E7%90%86"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">按键消抖处理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E5%91%A8%EF%BC%9A%E5%AE%9A%E6%97%B6%E5%99%A8%E5%BA%94%E7%94%A8"><span class="nav-number">1.6.</span> <span class="nav-text">第四周：定时器应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-TIM-%E6%A0%87%E5%87%86%E5%BA%93%E9%85%8D%E7%BD%AE"><span class="nav-number">1.6.1.</span> <span class="nav-text">4.1 TIM 标准库配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TIM-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">1.6.1.1.</span> <span class="nav-text">TIM 基本配置结构体</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E7%AC%AC%E5%9B%9B%E5%91%A8%E9%A1%B9%E7%9B%AE%EF%BC%9A%E5%AE%9A%E6%97%B6%E5%99%A8%E5%BA%94%E7%94%A8"><span class="nav-number">1.6.2.</span> <span class="nav-text">4.2 第四周项目：定时器应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%9A%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%AD%E6%96%AD%E5%AE%9E%E7%8E%B0%E7%B2%BE%E7%A1%AE%E5%BB%B6%E6%97%B6"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">方案一：定时器中断实现精确延时</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C%EF%BC%9APWM-%E8%BE%93%E5%87%BA%E6%8E%A7%E5%88%B6-LED-%E4%BA%AE%E5%BA%A6"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">方案二：PWM 输出控制 LED 亮度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%A1%88%E4%B8%89%EF%BC%9A%E8%BE%93%E5%85%A5%E6%8D%95%E8%8E%B7%E6%B5%8B%E9%87%8F%E9%A2%91%E7%8E%87"><span class="nav-number">1.6.2.3.</span> <span class="nav-text">方案三：输入捕获测量频率</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93"><span class="nav-number">1.7.</span> <span class="nav-text">调试技巧总结</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Keil5-%E8%B0%83%E8%AF%95%E9%85%8D%E7%BD%AE"><span class="nav-number">1.7.1.</span> <span class="nav-text">1. Keil5 调试配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%A0%87%E5%87%86%E5%BA%93%E8%B0%83%E8%AF%95%E5%87%BD%E6%95%B0"><span class="nav-number">1.7.2.</span> <span class="nav-text">2. 标准库调试函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%B8%B2%E5%8F%A3%E8%B0%83%E8%AF%95%E8%BE%93%E5%87%BA"><span class="nav-number">1.7.3.</span> <span class="nav-text">3. 串口调试输出</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E5%BA%93%E5%87%BD%E6%95%B0%E9%80%9F%E6%9F%A5%E8%A1%A8"><span class="nav-number">1.8.</span> <span class="nav-text">标准库函数速查表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GPIO-%E5%87%BD%E6%95%B0"><span class="nav-number">1.8.1.</span> <span class="nav-text">GPIO 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RCC-%E5%87%BD%E6%95%B0"><span class="nav-number">1.8.2.</span> <span class="nav-text">RCC 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#USART-%E5%87%BD%E6%95%B0"><span class="nav-number">1.8.3.</span> <span class="nav-text">USART 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TIM-%E5%87%BD%E6%95%B0"><span class="nav-number">1.8.4.</span> <span class="nav-text">TIM 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXTI-%E5%87%BD%E6%95%B0"><span class="nav-number">1.8.5.</span> <span class="nav-text">EXTI 函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%AE%8F%E5%AE%9A%E4%B9%89%E5%92%8C%E6%9E%9A%E4%B8%BE"><span class="nav-number">1.9.</span> <span class="nav-text">常用宏定义和枚举</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GPIO-%E7%9B%B8%E5%85%B3"><span class="nav-number">1.9.1.</span> <span class="nav-text">GPIO 相关</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%92%9F%E7%9B%B8%E5%85%B3"><span class="nav-number">1.9.2.</span> <span class="nav-text">时钟相关</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="John Doe"
      src="/images/chino2.jpg">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CYZ2024" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CYZ2024" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/241180180@smail.nju.edu.cn" title="E-Mail → 241180180@smail.nju.edu.cn"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
